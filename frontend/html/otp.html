<!-- <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
---- Include the above in your HEAD tag -------- -->

<!DOCTYPE html>
<html>

<head>
    <title>Login Page</title>
    <!--Made with love by Mutiullah Samim -->

    <!--Bootsrap 4 CDN-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <!--Fontawesome CDN-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css"
        integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

    <!--Custom styles-->
    <link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>
    
    <div class="row justify-content-center thumbnailImage">
            <div class="ucard" style="width: 18rem;">
              <p id="warning" class="warning"></p>
                <img class="card-img-top img-fluid thumbnailImage"  src="/img/otp.png" alt="">
                <div class="card-body">
                    <h6 class="otp thumbnailImage">Enter otp</h6>
                    <input type="number" id="otp" class="iotp">
                    <button type="button" class="cbutton" onclick="call()" >Submit</button>
                </div>
            </div>
        </div>
        <script>
          if(!sessionStorage.getItem("username"))
          window.history.back()
          function call(){
              fetch(`http://localhost:3000/otp/verify`, {
    method: "POST",
    body: JSON.stringify({
      otp:document.querySelector("#otp").value,
      hash:sessionStorage.getItem("hash"),
      username:sessionStorage.getItem("username"),
    }),
    headers: {
      "Content-type": "application/json; charset=UTF-8",
      'Accept': 'application/json'
    }
  })
    .then(response => {
      return response.json()
    })
    .then(response => {
      if(response.status==false)
      document.querySelector("#warning").innerHTML=response.message;
      else
      {
        fetch(`http://localhost:3000/otp/verifygmail`, {
      method: "POST",
      body: JSON.stringify({
        username:sessionStorage.getItem("username")
      }),
      headers: {
        "Content-type": "application/json; charset=UTF-8",
        'Accept': 'application/json'
      }
    })
      .then(response => {
        return response.json()
      })
      .then(response => {
        alert("Account Verified")
        sessionStorage.removeItem("hash");
        sessionStorage.removeItem("username");
        window.location.href = "/signin.html";
      });
    }
    });
          }
         </script>
</body>

</html>